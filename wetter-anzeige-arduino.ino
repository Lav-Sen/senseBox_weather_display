#include <Adafruit_NeoPixel.h>
#include <Adafruit_NeoMatrix.h>
#include <Adafruit_GFX.h> // http://librarymanager/All#Adafruit_GFX_Library
#include <Adafruit_DPS310.h> // http://librarymanager/All#Adafruit_DPS310

#define WIDTH 12
#define HEIGHT 8

Adafruit_NeoMatrix matrix_2 = Adafruit_NeoMatrix(WIDTH, HEIGHT, 2, NEO_MATRIX_TOP + NEO_MATRIX_LEFT + NEO_MATRIX_ROWS + NEO_MATRIX_ZIGZAG, NEO_GRB + NEO_KHZ800);
Adafruit_DPS310 dps;

const uint16_t bitmap_Sonny[] = {0x0, 0x0, 0xffe6, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xffe6, 0x0, 0x0,
0x0, 0x0, 0x0, 0xffe6, 0x0, 0x0, 0x0, 0x0, 0xffe6, 0x0, 0x0, 0x0,
0x0, 0x0, 0x0, 0x0, 0xffe6, 0xffe0, 0xffe6, 0xffe6, 0x0, 0x0, 0x0, 0x0,
0x0, 0x0, 0x0, 0x0, 0xffe6, 0xffe6, 0xffe6, 0xffe6, 0x0, 0x0, 0x0, 0x0,
0x0, 0x0, 0xffe6, 0xffe6, 0xffe6, 0xffe6, 0xffe6, 0xffe6, 0xffe6, 0xffe6, 0x0, 0x0,
0x0, 0x0, 0x0, 0x0, 0xffe6, 0xffe6, 0xffe6, 0xffe6, 0x0, 0x0, 0x0, 0x0,
0x0, 0x0, 0x0, 0xffe6, 0x0, 0x0, 0x0, 0x0, 0xffe6, 0x0, 0x0, 0x0,
0x0, 0x0, 0xffe6, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xffe6, 0x0, 0x0,
};

void setup() {

  matrix_2.setBrightness(20);

  matrix_2.setTextWrap(false);

  matrix_2.begin();

  dps.begin_I2C(0x76);

  dps.configurePressure(DPS310_64HZ, DPS310_64SAMPLES);
  dps.configureTemperature(DPS310_64HZ, DPS310_64SAMPLES);

}

void loop() {

  sensors_event_t temp_event, pressure_event;
  dps.getEvents(&temp_event, &pressure_event);
  if ((temp_event.temperature > 20 && pressure_event.pressure > 1020)) {
    matrix_2.drawRGBBitmap(0,0, bitmap_Sonny, WIDTH, HEIGHT);
    matrix_2.show();
  }
    Serial.println("Grad: ");
    Serial.println();

}